(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{8312:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(2196)}])},2196:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return g}});var a=l(5893),t=l(2654),r=l(7294);let n=e=>{let{}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("svg",{className:"w-6 h-auto",viewBox:"0 0 41 51",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_1_7)",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.6103 27.1074C29.2526 24.5774 28.8855 18.5282 28.8855 18.5282C25.7168 16.9873 24.4029 16.1503 24.6734 12.7072C24.9439 10.881 28.132 8.9407 29.8129 8.57926C29.8129 8.57926 30.7017 4.4323 32.0349 4.18501C33.3681 3.93771 33.1748 7.98956 34.0829 8.10369C35.0104 8.19881 35.1843 4.16598 36.2856 4.10892C37.3869 4.05185 38.1598 4.16598 38.3916 10.8049C38.6428 17.4248 41 23.4551 41 32.1865C41 38.7874 38.7974 47.0052 37.7347 50.6005C37.6574 50.8668 37.4255 51.038 37.1357 51.038H34.1796C34.0057 51.038 33.8511 50.981 33.7158 50.8478C33.5999 50.7147 33.542 50.5625 33.5613 50.3913C33.7158 48.508 33.7158 43.9806 32.3054 44.2089C31.32 44.3801 29.4845 48.6222 28.6536 50.6576C28.557 50.8859 28.3445 51.038 28.074 51.038H24.9053C24.6928 51.038 24.5189 50.9429 24.4029 50.7908C24.287 50.6195 24.2484 50.4293 24.3256 50.2391C24.6348 49.364 24.9826 48.1085 25.1758 46.5677C25.8327 41.6789 19.7658 43.8094 17.1767 50.6386C17.0801 50.8859 16.8676 51.038 16.5971 51.038H13.7375C13.4091 51.038 13.1386 50.7908 13.1192 50.4864C12.9453 48.5651 12.8294 45.4834 13.2545 41.5267C14.008 34.5643 15.1093 32.4338 17.5825 30.95C20.0556 29.4662 25.968 29.6755 27.6103 27.1264V27.1074ZM33.7158 14.8187C34.2762 14.8187 34.7399 14.1339 34.7399 13.2969C34.7399 12.4599 34.2762 11.7751 33.7158 11.7751C33.1555 11.7751 32.6918 12.4599 32.6918 13.2969C32.6918 14.1339 33.1555 14.8187 33.7158 14.8187Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M4.16476 9.18503C4.25586 13.5952 8.61723 17.0732 13.8743 16.9646C14.952 16.9423 15.9663 16.7961 16.9165 16.4978C17.1148 16.4356 17.327 16.4274 17.5268 16.4846L20.9286 17.4578C21.7202 17.6843 22.431 16.9106 22.1384 16.141L21.4915 14.4397C21.356 14.0834 21.4395 13.6844 21.6764 13.3857C22.7038 12.0906 23.2895 10.4948 23.2543 8.79068C23.164 4.41882 18.8391 0.901769 13.5448 1.01114C8.28767 1.11974 4.07444 4.81317 4.16476 9.18503ZM18.5073 10.1164C17.8734 10.1295 17.3031 9.6042 17.2888 8.91391C17.2754 8.26197 17.8227 7.67517 18.4566 7.66208C19.1277 7.64821 19.6616 8.21267 19.675 8.86462C19.6893 9.55491 19.1784 10.1026 18.5073 10.1164ZM13.7349 10.215C13.1011 10.2281 12.5307 9.70279 12.5164 9.0125C12.503 8.36055 13.0504 7.77376 13.6842 7.76066C14.3553 7.7468 14.8892 8.31126 14.9026 8.9632C14.9169 9.6535 14.406 10.2012 13.7349 10.215ZM7.74405 9.11108C7.73058 8.45914 8.27796 7.87234 8.9118 7.85925C9.58291 7.84539 10.1168 8.40985 10.1302 9.06179C10.1445 9.75208 9.63362 10.2998 8.9625 10.3136C8.32867 10.3267 7.75831 9.80138 7.74405 9.11108Z",fill:"currentColor"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1_7",children:(0,a.jsx)("rect",{width:"41",height:"51",fill:"white"})})})]})})},i=e=>{let{content:s,role:l}=e;return(0,a.jsx)(t.xu,{className:"p-md md:p-lg ",children:(0,a.jsx)("div",{className:"assistant"===l?"flex justify-start":"flex justify-end text-right",children:(0,a.jsxs)("div",{className:"assistant"===l?"flex justify-start gap-md ":"flex justify-end text-right gap-md flex-row-reverse",children:["assistant"===l&&(0,a.jsx)("div",{className:"flex items-start mt-md",children:(0,a.jsx)(n,{})}),(0,a.jsxs)(t.xu,{className:"p-sm rounded-md  break-words min-w-0 [word-break:break-word]",variant:"assistant"===l?"background":"super",children:["assistant"===l&&(0,a.jsx)(t.RT,{variant:"baseSemi",color:"light",children:"LLaMa served by Perplexity Labs"}),(0,a.jsx)(t.RT,{children:(0,a.jsx)(t.ws,{response:{answer:s},isPending:!1})})]})]})})})},c=(0,r.createContext)({submitCount:0,triggerSubmit:async()=>{}}),o=()=>(0,r.useContext)(c),d=e=>{let{children:s}=e,[l,t]=(0,r.useState)(0),n=async()=>new Promise(e=>{t(s=>(e(),s+1))});return(0,a.jsx)(c.Provider,{value:{submitCount:l,triggerSubmit:n},children:s})};l(3454);let m=async(e,s,l,a,t)=>{let r=!1,n=l=>{a(a=>{let i={...a,elapsedTime:l.elapsed_time,currentChunk:l.output};return!0!==l.final||r||(r=!0,i.messages=[...a.messages,{role:"assistant",content:l.output,priority:0}],i.inProgress=!1,t&&t(!1),i.tokensStreamed=l.tokens_streamed,e.off("".concat(s,"_query_progress"),n)),i})};e.off("".concat(s,"_query_progress"),n),e.on("".concat(s,"_query_progress"),n),e.emit("perplexity_playground",{model:s,messages:l.messages.slice(1).slice(-100)})};var x=l(2489),u=l(7072);let h=[{value:"llama-2-7b-chat",label:"llama-2-7b-chat"},{value:"llama-2-13b-chat",label:"llama-2-13b-chat"},{value:"llama-2-70b-chat",label:"llama-2-70b-chat"}],p=e=>{var s;let{inputText:l,inProgress:n,setInProgress:c}=e,d=(0,r.useContext)(t.Vw),[p,j]=(0,r.useState)(1),C=h[p],[g,f]=(0,r.useState)({messages:[{role:"assistant",content:"Hello! I am a LLaMa created by Meta AI and brought to life by the Perplexity team. How can I help you?",priority:0}],currentChunk:"",tokensStreamed:0,elapsedTime:0,inProgress:!1}),{submitCount:v}=o(),w=(0,r.useRef)(null),b=()=>{g.messages.push({role:"user",content:l,priority:0}),f(e=>({...e,currentChunk:"",inProgress:!0}))},y=e=>{let s=h.findIndex(s=>s.value===e);j(s)},N=async()=>{b(),await m(d,C.value,g,f,c)};return r.useEffect(()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),window.scrollBy(0,100)},[g.currentChunk]),r.useEffect(()=>{v>0&&N().then()},[v]),(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"max-w-screen-lg mx-auto w-full md:px-md",children:(0,a.jsxs)(t.xu,{variant:"background",className:"flex items-center justify-between py-md md:border-x border-b   sticky top-0  z-20 px-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-sm group",children:[(0,a.jsx)(t.RT,{color:"super",variant:"section-title",children:(0,a.jsx)(x.G,{icon:u.A47,fixedWidth:!0,className:"transition-all ease-out duration-300 group-hover:rotate-180"})}),(0,a.jsx)(t.RT,{color:"super",variant:"smallCaps",children:"Perplexity Labs"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-md",children:[(0,a.jsx)(t.RT,{}),(0,a.jsx)(t.RT,{children:(0,a.jsx)("span",{className:"font-display text-xl tracking-wide font-bold hidden md:inline",children:"LLaMa Chat"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,a.jsx)(t.Av,{text:"Llama",href:"https://ai.meta.com/llama/",target:"_blank",size:"small",icon:u.wlW}),(0,a.jsx)(t.zx,{size:"small",variant:"primary",href:"https://www.perplexity.ai",text:"Try Perplexity"})]})]})}),(0,a.jsxs)("div",{className:"grow max-w-screen-lg w-full mx-auto md:px-md h-full flex flex-col",children:[(0,a.jsx)(t.xu,{className:"grow pt-md md:pt-lg md:border-x ",children:(0,a.jsxs)(t.RT,{children:[g.messages.map((e,s)=>(0,a.jsx)(i,{content:e.content,role:e.role},s)),g.inProgress&&(0,a.jsx)(i,{content:g.currentChunk,role:"assistant"}),(0,a.jsx)("div",{ref:w})]})}),(0,a.jsxs)(t.xu,{className:"p-md border-x flex flex-col md:flex-row md:items-center justify-between gap-md",children:[(0,a.jsxs)(t.xu,{className:"flex items-center gap-md divide-x",children:[(0,a.jsx)(t.RT,{color:"super",children:(0,a.jsx)(x.G,{icon:u.Yal,fixedWidth:!0})}),(0,a.jsxs)("div",{className:"pl-md",children:[(0,a.jsx)(t.RT,{className:"inline",variant:"smallBold",children:null===(s=g.elapsedTime)||void 0===s?void 0:s.toFixed(2)}),(0,a.jsxs)(t.RT,{className:"inline",color:"light",variant:"smallBold",children:[" ","sec"]})]}),g.tokensStreamed>0&&!g.inProgress&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pl-md",children:g.elapsedTime>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.RT,{className:"inline",variant:"smallBold",children:[Math.floor(g.tokensStreamed/g.elapsedTime)," "]}),(0,a.jsx)(t.RT,{color:"light",className:"inline",variant:"smallBold",children:"tokens/sec"})]}):null}),(0,a.jsxs)("div",{className:"pl-md",children:[(0,a.jsx)(t.RT,{className:"inline",variant:"smallBold",children:g.tokensStreamed}),(0,a.jsxs)(t.RT,{color:"light",className:"inline",variant:"smallBold",children:[" ","tokens"]})]})]})]}),(0,a.jsx)("div",{className:"md:pl-md",children:(0,a.jsx)(t.RT,{className:"inline",variant:"smallCaps",color:"light",children:(0,a.jsx)(t.Ph,{id:"lamma-select",label:"",activeKey:C.value,onOptionChange:y,options:h})})})]})]})]})},j=e=>{let{inputText:s,onChangeInput:l,inProgress:n,setInProgress:i}=e,{triggerSubmit:c}=o(),d=(0,r.useCallback)(async()=>{""===s||n||(await c(),l(""),i(!0))},[l,c,s,i,n]),m=(0,r.useCallback)(async e=>{"Enter"!==e.key||e.shiftKey||!e.metaKey&&e.shiftKey||(e.preventDefault(),await d())},[d]),x=(0,r.useCallback)(e=>{l(e.target.value)},[l]);return(0,a.jsx)("div",{className:"max-w-screen-lg mx-auto md:px-md",children:(0,a.jsx)(t.xu,{className:"py-md border-t md:border-x px-md",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-sm",children:[(0,a.jsx)(t.zx,{pill:!0,icon:u.paY,toolTip:"Clear Chat",onClick:()=>window.location.reload()}),(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)(t.II,{size:"large",value:s,onChange:x,onKeyDown:m,onClear:()=>{l("")},onSubmit:d,placeholder:"Say something...",showFocuses:!1,autoFocus:!0,rightItems:[{type:"button",buttonProps:{icon:u.eFW,variant:"primary",onClick:d,disabled:""===s}}]})})]})})})},C=()=>{let[e,s]=(0,r.useState)(""),[l,n]=(0,r.useState)(!1);return(0,a.jsx)(d,{children:(0,a.jsxs)("div",{className:"h-full flex flex-col ",children:[(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)(p,{inputText:e,inProgress:l,setInProgress:n})}),(0,a.jsx)(t.xu,{variant:"background",className:"sticky bottom-0",children:(0,a.jsx)(j,{inputText:e,onChangeInput:s,inProgress:l,setInProgress:n})})]})})};function g(){return(0,a.jsx)(C,{})}}},function(e){e.O(0,[5913,9603,9774,2888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);